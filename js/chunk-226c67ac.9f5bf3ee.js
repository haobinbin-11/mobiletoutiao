(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-226c67ac"],{"1cdc0":function(e,n,t){},"9ed6":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login-container"},[t("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:"注册 / 登录","left-arrow":""},on:{"click-left":function(n){return e.$router.back()}}}),t("van-form",{ref:"login-form",attrs:{"show-error":!1,"show-error-message":!1,"validate-first":!0},on:{submit:e.onLogin,failed:e.onFailed}},[t("van-field",{attrs:{"icon-prefix":"hh","left-icon":"shouji",center:"",placeholder:"请输入手机号",name:"mobile",rules:e.formRules.mobile},model:{value:e.user.mobile,callback:function(n){e.$set(e.user,"mobile",n)},expression:"user.mobile"}}),t("van-field",{attrs:{clearable:"","icon-prefix":"hh",center:"","left-icon":"yanzhengma",placeholder:"请输入验证码",name:"code",rules:e.formRules.code},scopedSlots:e._u([{key:"button",fn:function(){return[e.isCountDownShow?t("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(n){e.isCountDownShow=!1}}}):t("van-button",{staticClass:"send-btn",attrs:{size:"small",round:"",type:"primary",loading:e.isSendSmsLoading},on:{click:function(n){return n.preventDefault(),e.onSendSms(n)}}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.user.code,callback:function(n){e.$set(e.user,"code",n)},expression:"user.code"}}),t("div",{staticClass:"login-btn-wrap"},[t("van-button",{staticClass:"login-btn",attrs:{type:"info",block:""}},[e._v("登录")])],1)],1)],1)},s=[],r=(t("96cf"),t("1da1")),a=t("c24f"),i={name:"LoginIndex",components:{},props:{},data:function(){return{user:{mobile:"18519689002",code:"246810"},formRules:{mobile:[{required:!0,message:"请输入手机号"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"手机号格式错误"}],code:[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码格式错误"}]},isCountDownShow:!1,isSendSmsLoading:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onLogin:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var t,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$toast.loading({message:"登录中.....",forbidClick:!0,loadingType:"spinner",duration:0}),n.prev=1,n.next=4,Object(a["c"])(e.user);case 4:t=n.sent,o=t.data,e.$toast.success("登录成功"),e.$store.commit("setUser",o.data),e.$router.back(),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),console.log(n.t0),e.$toast.fail("登录失败, 手机号或验证码错误");case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},onFailed:function(e){e.errors[0]&&this.$toast({message:e.errors[0].message,position:"top"})},onSendSms:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var t,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$refs["login-form"].validate("mobile");case 3:return t=n.sent,console.log(t),e.isSendSmsLoading=!0,e.isCountDownShow=!0,n.next=9,Object(a["d"])(e.user.mobile);case 9:n.next=16;break;case 11:n.prev=11,n.t0=n["catch"](0),o="",o=n.t0&&n.t0.response&&429===n.t0.response.status?"发送频繁,请稍后重试":"mobile"===n.t0.name?n.t0.message:"发送失败, 请稍后重试",e.$toast({message:o,position:"top"});case 16:e.isSendSmsLoading=!1;case 17:case"end":return n.stop()}}),n,null,[[0,11]])})))()}}},c=i,u=(t("b5a6"),t("2877")),l=Object(u["a"])(c,o,s,!1,null,"26af0ed2",null);n["default"]=l.exports},b5a6:function(e,n,t){"use strict";var o=t("1cdc0"),s=t.n(o);s.a}}]);
//# sourceMappingURL=chunk-226c67ac.9f5bf3ee.js.map